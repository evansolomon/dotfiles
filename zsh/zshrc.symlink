# -----------------------------------------------------------------------------
# oh-my-zsh
# -----------------------------------------------------------------------------
ZSH=$HOME/.oh-my-zsh
plugins=(git coffee extract history-substring-search node-docs zsh-syntax-highlighting)
source $ZSH/oh-my-zsh.sh


# -----------------------------------------------------------------------------
# Default editor is Sublime Text 2 in wait mode
# -----------------------------------------------------------------------------
export EDITOR='st -w'

# -----------------------------------------------------------------------------
# Version managers
# -----------------------------------------------------------------------------
[[ -s $HOME/.nvm/nvm.sh ]] && . $HOME/.nvm/nvm.sh && nvm use default >/dev/null
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"

# -----------------------------------------------------------------------------
# $PATH
# -----------------------------------------------------------------------------
PATH=${PATH}:~/bin

# Give homebrew priority.
PATH=/usr/local/bin:${PATH}

# Add RVM to PATH for scripting
PATH=$PATH:$HOME/.rvm/bin

# Add local Node modules
PATH="./node_modules/.bin:$PATH"

# Export the path.
export PATH=$PATH

# -----------------------------------------------------------------------------
# Load z
# -----------------------------------------------------------------------------
if command -v brew >/dev/null; then
  . $(brew --prefix)/etc/profile.d/z.sh
fi

# -----------------------------------------------------------------------------
# ZSH Tweaks
# -----------------------------------------------------------------------------

# I dislike underlines.
if [ -n "${ZSH_HIGHLIGHT_STYLES+x}" ]; then
  ZSH_HIGHLIGHT_STYLES[precommand]='green'
  ZSH_HIGHLIGHT_STYLES[path]='none'
fi

# History verify is annoying
unsetopt histverify

# -----------------------------------------------------------------------------
# Dotfiles
# -----------------------------------------------------------------------------

# The dotfiles directory is stored in `$DOTFILES`.
export DOTFILES="$(readlink ~/.zshrc | xargs dirname | xargs dirname)"

# Load all dotfiles that end in `.zsh`.
for zsh ($DOTFILES/**/*.zsh) source $zsh

# Include local config if it exists
if [[ -a ~/.localrc ]]; then
  source ~/.localrc
fi

# Include host-specific config if it exists
if [[ -a ~/.$(hostname).hostrc ]]; then
  source ~/.$(hostname).hostrc
fi
