#!/usr/bin/env node

var child_process = require('child_process')

var args = process.argv.slice(2)
if (args[0] === 'list') {
  child_process.exec('ps aux | grep "queue job" | grep -v grep').stdout.pipe(process.stdout)
} else {
  var delay = parseInt(args.shift(), 10)
  var message = args.join(' ')

  var command = 'sleep ' + delay + '; terminal-notifier -message "' + message + '"'
  command += ' # queue job'

  child_process.exec(command).unref()
  process.exit()
}
